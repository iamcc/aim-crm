// Generated by CoffeeScript 1.6.3
(function() {
  var Sales, async, method;

  Sales = require('../models/salesModel');

  async = require('async');

  method = {
    GET: function(req, res, next) {
      var _id;
      if ((_id = req.params._id)) {
        return console.log(_id);
      } else {
        if (req.query.s) {
          return Sales.find({
            name: new RegExp(req.query.s, 'i')
          }, '_id name company.name', {
            limit: 10
          }, function(err, docs) {
            if (err) {
              console.log(err);
              return res.send(500);
            }
            return res.send(docs);
          });
        }
      }
    },
    PUT: function(req, res, next) {},
    POST: function(req, res, next) {}
  };

  module.exports = function(req, res, next) {
    var e;
    try {
      return method[req.method](req, res, next);
    } catch (_error) {
      e = _error;
      console.log(e);
      return res.send(405);
    }
  };

}).call(this);
