<!-- navbar -->
<nav class="navbar navbar-default">
  <div class="container">
    <div class="navbar-header">
      <a class="navbar-brand" href="/">AIM.CRM</a>
    </div>
    <ul class="nav navbar-nav">
      <li ng-class="{active: curCountItem == 'area'}"><a href="" ng-click="showCount('area')">区域 <b class="caret"></b></a>
      </li>
      <li ng-class="{active: curCountItem == 'city'}"><a href="" ng-click="showCount('city')">分公司 <b class="caret"></b></a>
      </li>
      <li ng-class="{active: curCountItem == 'industry'}"><a href="" ng-click="showCount('industry')">行业 <b class="caret"></b></a>
      </li>
      <li ng-class="{active: curCountItem == 'proType'}"><a href="" ng-click="showCount('proType')">项目类型 <b class="caret"></b></a>
      </li>
      <li ng-class="{active: isShowFilter}"><a href="" ng-click="showFilter()">筛选 <b class="caret"></b></a>
      </li>
    </ul>
    <!-- user -->
    <ul class="nav navbar-nav navbar-right">
      <li class="dropdown">
        <a href="" class="dropdown-toggle" data-toggle="dropdown">{{userinfo.realname}} <span class="badge">{{num}}</span> <b class="caret"></b></a>
        <ul class="dropdown-menu">
          <li><a href="">通知 <span class="badge pull-right">{{num}}</span></a> 
          </li>
          <li class="divider" ng-show="['finance', 'admin'].indexOf(userinfo.role) != -1"></li>
          <li><a href="" ng-show="['finance', 'admin'].indexOf(userinfo.role) != -1">财务</a> 
          </li>
          <li class="divider"></li>
          <li><a href="#/setting">设置</a> 
          </li>
          <li class="divider"></li>
          <li><a href="/logout">退出</a> 
          </li>
        </ul>
      </li>
    </ul>
    <!-- user end -->
  </div>
</nav>

<!-- navbar end -->

<!-- container -->
<div class="container">
  <!-- count -->
  <div class="well well-sm count" ng-show="isShowCount">
    <ul>
      <li>aaa
        <span class="badge">3</span>
      </li>
      <li>aaa
        <span class="badge">3</span>
      </li>
      <li>aaa
        <span class="badge">3</span>
      </li>
    </ul>
    <div class="clearfix"></div>
  </div>
  <!-- count end -->

  <!-- filter -->
  <div class="well well-sm filter" ng-show="isShowFilter">
    <form class="form-inline">
      <div class="form-group">
        <input type="text" class="form-control" placeholder="最低金额">
      </div>
      <div class="form-group">
        <input type="text" class="form-control" placeholder="最高金额">
      </div>
      <div class="form-group">
        <select name="" id="" class="form-control">
          <option value="">选项</option>
        </select>
      </div>
      <br>
      <br>
      <button class="btn btn-default" type="button">重置</button>
      <button class="btn btn-primary" type="button">筛选</button>
    </form>
  </div>
  <!-- filter end -->

  <!-- project panel -->
  <div class="panel panel-default">
    <div class="panel-heading">
      项目
      <span class="badge">100</span>
      <button class="btn btn-primary btn-xs pull-right" type="button" data-toggle="modal" data-target="#addModal" data-backdrop="static" ng-click="newProject = null">
        <span class="glyphicon glyphicon-plus"></span>
      </button>
      <div class="clearfix"></div>
    </div>
    <table class="table table-hover">
      <tr>
        <th>#</th>
        <th>项目名</th>
        <th>项目类型</th>
        <th>分公司</th>
        <th>销售</th>
        <th>行业</th>
        <th>当前状态</th>
        <th>客服</th>
        <th>标签</th>
        <th></th>
      </tr>
      <tr ng-repeat-start="p in projectData.list">
        <td>
          <button class="btn btn-xs" ng-click="p.isShowMore = !p.isShowMore">
            <span class="glyphicon" ng-class="{'glyphicon-chevron-up': !p.isShowMore, 'glyphicon-chevron-down': p.isShowMore}"></span>
          </button>
        </td>
        <td ng-click="showEdit($event, p)">
          <span class="view">{{p.name}}</span>
          <span class="edit" style="display:none;">
            <input type="text" class="form-control" ng-model="p.name" ng-blur="update($event, p, 'name')">
          </span>
        </td>
        <td ng-click="showEdit($event, p)">
          <span class="view">{{p.type.name}}</span>
          <span class="edit" style="display:none;">
            <select class="form-control" ng-model="p.type" ng-options="t as t.name for t in projectTypes" ng-blur="update($event, p, 'type')">
            </select>
          </span>
        </td>
        <td ng-click="showEdit($event, p)">
          <span class="view">{{p.company.name}}</span>
          <span class="edit" style="display:none;">
            <select class="form-control" ng-model="p.company" ng-options="c as c.name for c in companies">
            </select>
            <!-- <input type="text" class="form-control" ng-model="p.company" ng-blur="update($event, p, 'company')"> -->
          </span>
        </td>
        <td ng-click="showEdit($event, p)">
          <span class="view">{{p.sales.name}}</span>
          <span class="edit" style="display:none;">
            <select class="form-control" ng-model="p.sales" ng-options="s as s.name for s in saleses"></select>
            <!-- <input type="text" class="form-control" ng-model="p.sales" ng-blur="update($event, p, 'sales')"> -->
          </span>
        </td>
        <td ng-click="showEdit($event, p)">
          <span class="view">{{p.industry.name}}</span>
          <span class="edit" style="display:none;">
            <select class="form-control" ng-model="p.industry" ng-options="i as i.name for i in industries" ng-blur="update($event, p, 'industry')">
            </select>
          </span>
        </td>
        <td>{{p.status}}</td>
        <td ng-click="showEdit($event, p)">
          <span class="view">{{p.supporter.realname}}</span>
          <span class="edit" style="display:none;">
            <select class="form-control" ng-model="p.supporter" ng-options="s as s.realname for s in supporters" ng-blur="update($event, p, 'supporter')">
            </select>
          </span>
        </td>
        <td ng-click="showEdit($event, p)">
          <span class="view">{{p.tags}}</span>
          <span class="edit" style="display:none;">
            <input type="text" class="form-control" ng-model="p.tags" ng-list ng-blur="update($event, p, 'tags')">
          </span>
        </td>
        <td>
          <button class="btn btn-xs" type="button" data-toggle="modal" data-target="#commentModal" data-backdrop="static">
            <span class="glyphicon glyphicon-comment"></span>
          </button>
        </td>
      </tr>
      <tr ng-repeat-end ng-show="p.isShowMore">
        <td colspan="10">
          <div class="well well sm">
            <table class="table table-hover">
              <tr>
                <th>代理商</th>
                <th>价钱</th>
                <th>区域</th>
                <th>经理</th>
                <th>购买/年</th>
                <th>客户全称</th>
              </tr>
              <tr>
                <td ng-click="showEdit($event, p)">
                  <span class="view">{{p.agent.name}}</span>
                  <span class="edit" style="display:none;">
                    <select class="form-control" ng-model="p.agent" ng-options="a as a.name for a in agents" ng-blur="update($event, p, 'agent')">
                    </select>
                  </span>
                </td>
                <td ng-click="showEdit($event, p)">
                  <span class="view">{{p.price}}</span>
                  <span class="edit" style="display:none;">
                    <input type="number" class="form-control" ng-model="p.price" ng-blur="update($event, p, 'price')">
                  </span>
                </td>
                <td ng-click="showEdit($event, p)">
                  <span class="view">{{p.area.name}}</span>
                  <span class="edit" style="display:none;">
                    <select class="form-control" ng-model="p.area" ng-options="a as a.name for a in areas" ng-blur="update($event, p, 'area')"></select>
                  </span>
                </td>
                <!--  <td ng-click="showEdit($event, p)">
                  <span class="view">{{p.company.manager.name}}</span>
                  <span class="edit" style="display:none;">
                    <input type="text" class="form-control" ng-model="p.company.manager" ng-blur="update($event, p, 'manager')">
                  </span>
                </td> -->
                <td>{{p.company.manager.name}}</td>
                <td ng-click="showEdit($event, p)">
                  <span class="view">{{p.buyYear}}</span>
                  <span class="edit" style="display:none;">
                    <input type="text" class="form-control" ng-model="p.buyYear" ng-blur="update($event, p, 'buyYear')">
                  </span>
                </td>
                <td ng-click="showEdit($event, p)">
                  <span class="view">{{p.client}}</span>
                  <span class="edit" style="display:none;">
                    <input type="text" class="form-control" ng-model="p.client" ng-blur="update($event, p, 'client')">
                  </span>
                </td>
              </tr>
              <tr>
                <th>后台账号</th>
                <th>密码</th>
                <th>后台创建者</th>
                <th>微信账号</th>
                <th>密码</th>
                <th>微信类型</th>
              </tr>
              <tr>
                <td ng-click="showEdit($event, p)">
                  <span class="view">{{p.mae.account}}</span>
                  <span class="edit" style="display:none;">
                    <input type="text" class="form-control" ng-model="p.mae.account" ng-blur="update($event, p, 'mae')">
                  </span>
                </td>
                <td ng-click="showEdit($event, p)">
                  <span class="view">{{p.mae.pwd}}</span>
                  <span class="edit" style="display:none;">
                    <input type="text" class="form-control" ng-model="p.mae.pwd" ng-blur="update($event, p, 'mae')">
                  </span>
                </td>
                <td ng-click="showEdit($event, p)">
                  <span class="view">{{p.mae.creator.realname}}</span>
                  <span class="edit" style="display:none;">
                    <select class="form-control" ng-model="p.mae.creator.realname" ng-blur="update($event, p, 'mae')">
                      <option value="CC">CC</option>
                      <option value="DC">DC</option>
                    </select>
                  </span>
                </td>
                <td ng-click="showEdit($event, p)">
                  <span class="view">{{p.wx.account}}</span>
                  <span class="edit" style="display:none;">
                    <input type="text" class="form-control" ng-model="p.wx.account" ng-blur="update($event, p, 'wx')">
                  </span>
                </td>
                <td ng-click="showEdit($event, p)">
                  <span class="view">{{p.wx.pwd}}</span>
                  <span class="edit" style="display:none;">
                    <input type="text" class="form-control" ng-model="p.wx.pwd" ng-blur="update($event, p, 'wx')">
                  </span>
                </td>
                <td ng-click="showEdit($event, p)">
                  <span class="view">{{p.wx.type}}</span>
                  <span class="edit" style="display:none;">
                    <select class="form-control" ng-model="p.wx.type" ng-blur="update($event, p, 'wx')">
                      <option value="订阅号">订阅号</option>
                      <option value="服务号">服务号</option>
                    </select>
                  </span>
                </td>
              </tr>
              <tr>
                <th>下单日期</th>
                <th>EC企业ID</th>
                <th>发送EC盒子日期</th>
                <th>上线日期</th>
                <th>上线审核者</th>
                <th colspan="3">备注</th>
              </tr>
              <tr>
                <td ng-click="showEdit($event, p)">
                  <span class="view">{{p.orderDate}}</span>
                  <span class="edit" style="display:none;">
                    <input type="date" class="form-control" ng-model="p.orderDate" ng-blur="update($event, p, 'orderDate')">
                  </span>
                </td>
                <td ng-click="showEdit($event, p)">
                  <span class="view">{{p.ec.id}}</span>
                  <span class="edit" style="display:none;">
                    <input type="text" class="form-control" ng-model="p.ec.id" ng-blur="update($event, p, 'ec')">
                  </span>
                </td>
                <td ng-click="showEdit($event, p)">
                  <span class="view">{{p.ec.sendBoxDate}}</span>
                  <span class="edit" style="display:none;">
                    <input type="date" class="form-control" ng-model="p.ec.sendBoxDate" ng-blur="update($event, p, 'ec')">
                  </span>
                </td>
                <td>{{p.online.date}}</td>
                <td>{{p.online.reviewer.name}}</td>
                <td ng-click="showEdit($event, p)" colspan="3">
                  <span class="view" ng-bind-html="p.memo | wrap"></span>
                  <span class="edit" style="display:none;">
                    <textarea class="form-control" ng-model="p.memo" ng-blur="update($event, p, 'memo')"></textarea>
                  </span>
                </td>
              </tr>
            </table>
          </div>
        </td>
      </tr>
    </table>
    <ul class="pagination">
      <li ng-click="prePages()" ng-class="{disabled: projectData.minPage == 1}"><a href="">&laquo;</a>
      </li>
      <li ng-click="goPage(p)" ng-repeat="p in projectData.pageArr" ng-class="{active: p == projectData.curPage}"><a href="">{{p}}</a>
      </li>
      <li ng-click="nextPages()" ng-class="{disabled: projectData.maxPage >= projectData.totalPage}"><a href="">&raquo;</a>
      </li>
    </ul>
  </div>
  <!-- project panel end -->
</div>

<!-- container end -->

<!-- add project modal -->
<div id="addModal" class="modal fade">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <!-- <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button> -->
        <h4 class="modal-title">添加项目</h4>
      </div>
      <form name="projectForm" class="form-horizontal">
        <div class="modal-body">
          <div class="form-group">
            <label class="control-label col-sm-2">项目名</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" ng-model="newProject.name" required>
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-2">项目类型</label>
            <div class="col-sm-10">
              <select class="form-control" ng-model="newProject.type" ng-options="t as t.name for t in projectTypes" required>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-2">区域</label>
            <div class="col-sm-10">
              <select class="form-control" ng-model="newProject.area" ng-options="a as a.name for a in areas">
              </select>
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-2">分公司</label>
            <div class="col-sm-10">
              <select class="form-control" ng-model="newProject.company" ng-options="c as c.name for c in companies">
              </select>
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-2">销售</label>
            <div class="col-sm-10">
              <select class="form-control" ng-model="newProject.sales" ng-options="s as s.name for s in saleses">
              </select>
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-2">行业</label>
            <div class="col-sm-10">
              <select class="form-control" ng-model="newProject.industry" ng-options="i as i.name for i in industries">
              </select>
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-2">客户全称</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" ng-model="newProject.client">
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-2">下单日期</label>
            <div class="col-sm-10">
              <input type="date" class="form-control" ng-model="newProject.orderDate">
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-2">价格</label>
            <div class="col-sm-10">
              <input type="number" class="form-control" ng-model="newProject.price">
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-2">购买/年</label>
            <div class="col-sm-10">
              <input type="number" class="form-control" ng-model="newProject.buyYear">
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-2">代理商</label>
            <div class="col-sm-10">
              <select class="form-control" ng-model="newProject.agent" ng-options="a as a.name for a in agents">
              </select>
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-2">后台账号</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" ng-model="newProject.mae.account">
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-2">后台密码</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" ng-model="newProject.mae.pwd">
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-2">后台创建者</label>
            <div class="col-sm-10">
              <select class="form-control" ng-model="newProject.mae.creator">
                <option value="CC">CC</option>
                <option value="DC">DC</option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-2">微信账号</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" ng-model="newProject.wx.account">
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-2">微信密码</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" ng-model="newProject.wx.pwd">
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-2">微信类型</label>
            <div class="col-sm-10">
              <select class="form-control" ng-model="newProject.wx.type">
                <option value="订阅号">订阅号</option>
                <option value="服务号">服务号</option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-2">EC企业ID</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" ng-model="newProject.ec.id">
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-2">发送盒子时间</label>
            <div class="col-sm-10">
              <input type="date" class="form-control" ng-model="newProject.ec.sendBoxDate">
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-2">标签</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" ng-model="newProject.tags" ng-list>
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-2">客服</label>
            <div class="col-sm-10">
              <select class="form-control" ng-model="newProject.supporter" ng-options="s as s.realname for s in supporters">
              </select>
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-2">备注</label>
            <div class="col-sm-10">
              <textarea cols="30" rows="10" class="form-control" ng-model="newProject.memo"></textarea>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
          <button class="btn btn-primary" ng-click="saveProject(projectForm)">保存</button>
        </div>
      </form>
    </div>
    <!-- /.modal-content -->
  </div>
  <!-- /.modal-dialog -->
</div>
<!-- /.modal -->
<!-- end add project modal -->


<!-- comment modal -->
<div id="commentModal" class="modal fade">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <!-- <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button> -->
        <h4 class="modal-title">Modal title</h4>
      </div>
      <div class="modal-body">
        <p>One fine body&hellip;</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
    <!-- /.modal-content -->
  </div>
  <!-- /.modal-dialog -->
</div>
<!-- /.modal -->
<!-- end comment modal -->