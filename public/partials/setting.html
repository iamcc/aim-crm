<!-- navbar -->
<nav class="navbar navbar-default">
  <div class="container">
    <div class="navbar-header">
      <a class="navbar-brand" href="/">AIM.CRM</a>
    </div>
    <!-- user -->
    <ul class="nav navbar-nav navbar-right">
      <li class="dropdown">
        <a href="" class="dropdown-toggle" data-toggle="dropdown">{{userinfo.realname}} <span class="badge">{{num}}</span> <b class="caret"></b></a>
        <ul class="dropdown-menu">
          <li><a href="">通知 <span class="badge pull-right">{{num}}</span></a> 
          </li>
          <li class="divider" ng-if="['finance', 'admin'].indexOf(userinfo.role) != -1"></li>
          <li><a href="" ng-if="['finance', 'admin'].indexOf(userinfo.role) != -1">财务</a> 
          </li>
          <li class="divider" ng-if="['leader', 'admin'].indexOf(userinfo.role) != -1"></li>
          <li ng-if="['leader', 'admin'].indexOf(userinfo.role) != -1"><a href="#/setting">设置</a> 
          </li>
          <li class="divider"></li>
          <li><a href="/logout">退出</a> 
          </li>
        </ul>
      </li>
    </ul>
    <!-- user end -->
  </div>
</nav>

<!-- navbar end -->
<div class="container">
  <div class="row">
    <div class="col-sm-3">
      <ul class="list-group">
        <a href="" class="list-group-item" ng-click="selectMenu(0)" ng-class="{active: selectedMenu == 0}">修改密码</a>
        <a href="" class="list-group-item" ng-click="selectMenu(1)" ng-class="{active: selectedMenu == 1}" ng-if="['leader', 'admin'].indexOf(userinfo.role)!=-1">修改用户</a>
        <a href="" class="list-group-item" ng-click="selectMenu(2)" ng-class="{active: selectedMenu == 2}" ng-if="['leader', 'admin'].indexOf(userinfo.role)!=-1">添加用户</a>
        <a href="" class="list-group-item" ng-click="selectMenu(3)" ng-class="{active: selectedMenu == 3}" ng-if="['leader', 'admin'].indexOf(userinfo.role)!=-1">销售管理</a>
        <a href="" class="list-group-item" ng-click="selectMenu(4)" ng-class="{active: selectedMenu == 4}" ng-if="['leader', 'admin'].indexOf(userinfo.role)!=-1">区域管理</a>
        <a href="" class="list-group-item" ng-click="selectMenu(5)" ng-class="{active: selectedMenu == 5}" ng-if="['leader', 'admin'].indexOf(userinfo.role)!=-1">行业管理</a>
        <a href="" class="list-group-item" ng-click="selectMenu(6)" ng-class="{active: selectedMenu == 6}" ng-if="['leader', 'admin'].indexOf(userinfo.role)!=-1">代理商管理</a>
      </ul>
    </div>
    <div class="col-sm-9" ng-switch="selectedMenu">
      <!-- 修改密码 -->
      <div class="row" ng-switch-when="0" style="width:300px;">
        <form name="form0">
          <div class="alert alert-danger" ng-if="tabs[0].error">{{tabs[0].error}}</div>
          <div class="alert alert-success" ng-if="tabs[0].success">{{tabs[0].success}}</div>
          <div class="form-group">
            <input type="password" class="form-control" placeholder="密码" required ng-model="tabs[0].pwd">
            <input type="password" class="form-control" placeholder="确认密码" required ng-model="tabs[0].pwd2">
          </div>
          <div class="form-group">
            <button class="btn btn-primary btn-block" ng-click="tabs[0].save($event, form0)">保存</button>
          </div>
        </form>
      </div>
      <!-- 修改用户 -->
      <div class="row" ng-switch-when="1">
        <form name="form1" style="width:300px;">
          <div class="alert alert-danger" ng-if="tabs[1].error">{{tabs[1].error}}</div>
          <div class="alert alert-success" ng-if="tabs[1].success">{{tabs[1].success}}</div>
          <div class="form-group">
            <select class="form-control" ng-model="tabs[1].user._id" ng-options="u._id as u.realname for u in tabs[1].allUsers.list" ng-change="tabs[1].selectUser()">
              <option value="">选择用户</option>
            </select>
          </div>
          <div class="form-group">
            <div class="row">
              <div class="col-sm-8">
                <input type="text" class="form-control" ng-model="tabs[1].user.realname" placeholder="昵称" ng-disabled="!tabs[1].user._id">
              </div>
              <div class="col-sm-4">
                <button class="btn btn-primary" type="button" ng-click="tabs[1].updateRealname($event)" ng-disabled="!tabs[1].user._id">修改昵称</button>
              </div>
            </div>
          </div>
          <div class="form-group" ng-if="userinfo.role == 'admin'">
            <div class="row">
              <div class="col-sm-8">
                <select class="form-control" ng-model="tabs[1].user.role" ng-disabled="!tabs[1].user._id">
                  <option value="supporter">客服</option>
                  <option value="leader" ng-if="userinfo.role == 'admin'">客服主管</option>
                  <option value="finance" ng-if="userinfo.role == 'admin'">财务</option>
                </select>
              </div>
              <div class="col-sm-4">
                <button class="btn btn-primary" type="button" ng-click="tabs[1].updateRole($event)" ng-disabled="!tabs[1].user._id">修改角色</button>
              </div>
            </div>
          </div>
          <div class="form-group">
            <button class="btn btn-danger btn-block" type="button" ng-click="tabs[1].resetPwd($event)" ng-disabled="!tabs[1].user._id">重置密码</button>
          </div>
        </form>
      </div>
      <!-- 添加用户 -->
      <div class="row" ng-switch-when="2">
        <form name="form2" style="width:300px;">
          <div class="alert alert-danger" ng-if="tabs[2].error">{{tabs[2].error}}</div>
          <div class="alert alert-success" ng-if="tabs[2].success">{{tabs[2].success}}</div>
          <div class="form-group">
            <input type="text" class="form-control" placeholder="用户名" ng-model="tabs[2].newUser.uname" required>
          </div>
          <div class="form-group">
            <input type="text" class="form-control" placeholder="昵称" ng-model="tabs[2].newUser.realname" required>
          </div>
          <div class="form-group">
            <input type="password" class="form-control" placeholder="密码" ng-model="tabs[2].newUser.pwd" required>
          </div>
          <div class="form-group">
            <select type="text" class="form-control" ng-model="tabs[2].newUser.role" ng-init="tabs[2].newUser.role = 'supporter'">
              <option value="supporter">客服</option>
              <option value="leader" ng-if="userinfo.role == 'admin'">客服主管</option>
              <option value="finance" ng-if="userinfo.role == 'admin'">财务</option>
            </select>
          </div>
          <div class="form-group">
            <button class="btn btn-primary btn-block" ng-click="tabs[2].save($event, form2)">保存</button>
          </div>
        </form>
      </div>
      <!-- 销售管理 -->
      <div class="row" ng-switch-when="3">
        <div class="panel panel-default">
          <div class="panel-heading">
            销售(111)
            <button class="btn btn-primary btn-xs pull-right">
              <span class="glyphicon glyphicon-plus"></span>
            </button>
          </div>
          <div class="panel-body">
            <form class="form-inline">
              <select class="form-control">
                <option value="">区域</option>
              </select>
              <select class="form-control">
                <option value="">分公司</option>
              </select>
              <select class="form-control">
                <option value="">团队</option>
              </select>
            </form>
          </div>
          <table class="table table-hover">
            <tr>
              <th>名称</th>
              <th>电话</th>
              <th>所属团队</th>
            </tr>
            <tr>
              <td>123</td>
              <td>123</td>
              <td>123</td>
            </tr>
          </table>
        </div>
      </div>
      <!-- 区域管理 -->
      <div class="row" ng-switch-when="4">4</div>
      <!-- 行业管理 -->
      <div class="row" ng-switch-when="5">5</div>
      <!-- 代理商管理 -->
      <div class="row" ng-switch-when="6">6</div>
    </div>
  </div>
</div>
